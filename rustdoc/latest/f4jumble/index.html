<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate provides a mechanism for “jumbling” byte slices in a reversible way."><meta name="keywords" content="rust, rustlang, rust-lang, f4jumble"><title>f4jumble - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-73bd0883af174920.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-bc1b32400f872ddb.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../f4jumble/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../f4jumble/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate f4jumble</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">f4jumble</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/f4jumble/lib.rs.html#1-388">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate provides a mechanism for “jumbling” byte slices in a reversible way.</p>
<p>Many byte encodings such as <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> and <a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki#Bech32">Bech32</a> do not have “cascading” behaviour:
changing an input byte at one position has no effect on the encoding of bytes at
distant positions. This can be a problem if users generally check the correctness of
encoded strings by eye, as they will tend to only check the first and/or last few
characters of the encoded string. In some situations (for example, a hardware device
displaying on its screen an encoded string provided by an untrusted computer), it is
potentially feasible for an adversary to change some internal portion of the encoded
string in a way that is beneficial to them, without the user noticing.</p>
<p>The function F4Jumble (and its inverse function, F4Jumble⁻¹) are length-preserving
transformations can be used to trivially introduce cascading behaviour to existing
encodings:</p>
<ul>
<li>Prepare the raw <code>message</code> bytes as usual.</li>
<li>Pass <code>message</code> through <a href="fn.f4jumble.html" title="f4jumble"><code>f4jumble</code></a> or <a href="fn.f4jumble_mut.html" title="f4jumble_mut"><code>f4jumble_mut</code></a> to obtain the jumbled bytes.</li>
<li>Encode the jumbled bytes with the encoding scheme.</li>
</ul>
<p>Changing any byte of <code>message</code> will result in a completely different sequence of
jumbled bytes. Specifically, F4Jumble uses an unkeyed 4-round Feistel construction to
approximate a random permutation.</p>
<p><img src="https://zips.z.cash/zip-0316-f4.png" alt="Diagram of 4-round unkeyed Feistel construction" /></p>
<h3 id="efficiency"><a href="#efficiency">Efficiency</a></h3>
<p>The cost is dominated by 4 BLAKE2b compressions for message lengths up to 128 bytes.
For longer messages, the cost increases to 6 BLAKE2b compressions for 128 &lt; lₘ ≤ 192,
and 10 BLAKE2b compressions for 192 &lt; lₘ ≤ 256, for example. The maximum cost for
which the algorithm is defined would be 196608 BLAKE2b compressions at lₘ = 4194368.</p>
<p>The implementations in this crate require memory of roughly lₘ bytes plus the size of
a BLAKE2b hash state. It is possible to reduce this by (for example, with F4Jumble⁻¹)
streaming the <code>d</code> part of the jumbled encoding three times from a less
memory-constrained device. It is essential that the streamed value of <code>d</code> is the same
on each pass, which can be verified using a Message Authentication Code (with key held
only by the Consumer) or collision-resistant hash function. After the first pass of
<code>d</code>, the implementation is able to compute <code>y</code>; after the second pass it is able to
compute <code>a</code>; and the third allows it to compute and incrementally parse <code>b</code>. The
maximum memory usage during this process would be 128 bytes plus two BLAKE2b hash
states.</p>
</div></details><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="f4jumble::Error enum">Error</a></div><div class="item-right docblock-short">Errors produced by F4Jumble.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.VALID_LENGTH.html" title="f4jumble::VALID_LENGTH constant">VALID_LENGTH</a></div><div class="item-right docblock-short">Length of F4Jumbled message must lie in the range VALID_LENGTH.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.f4jumble.html" title="f4jumble::f4jumble fn">f4jumble</a><span class="stab portability" title="Available on crate feature `std` only"><code>std</code></span></div><div class="item-right docblock-short">Encodes the given message using F4Jumble, and returns the encoded message as a vector
of bytes.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.f4jumble_inv.html" title="f4jumble::f4jumble_inv fn">f4jumble_inv</a><span class="stab portability" title="Available on crate feature `std` only"><code>std</code></span></div><div class="item-right docblock-short">Decodes the given message using F4Jumble⁻¹, and returns the decoded message as a
vector of bytes.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.f4jumble_inv_mut.html" title="f4jumble::f4jumble_inv_mut fn">f4jumble_inv_mut</a></div><div class="item-right docblock-short">Decodes the given message in-place using F4Jumble⁻¹.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.f4jumble_mut.html" title="f4jumble::f4jumble_mut fn">f4jumble_mut</a></div><div class="item-right docblock-short">Encodes the given message in-place using F4Jumble.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="f4jumble" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (388538fc9 2023-01-05)" data-search-js="search-181581080540673f.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-58836c674e2f7bd2.css" ></div></body></html>